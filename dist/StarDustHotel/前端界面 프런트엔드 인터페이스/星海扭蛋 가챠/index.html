<head><script type="module">var e={667(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a}}},t={};const a=Vue,l={class:'page'},n={class:'card header'},o={class:'stats'},r={class:'card'},s={class:'row'},i=['disabled'],c=['disabled'],u={class:'hint'},d={class:'hint'},m={class:'card grid3'},v={class:'gacha-box'},p=['disabled'],f={class:'gacha-box'},V=['disabled'],N={class:'gacha-box'},E=['disabled'],w={class:'card'},y={class:'grid2'},S=['disabled'],b={class:'card'},g={class:'row'},h=['disabled'],D=['disabled'],k={class:'hint'},C={class:'card'},P={class:'result'},U=['disabled'],x={class:'card tables'},L={class:'list'},B={class:'list'},M=(0,a.defineComponent)({__name:'App',setup(e){const t=(0,a.ref)(!1),M=(0,a.ref)(null),T=(0,a.ref)(''),I=(0,a.ref)(''),A=(0,a.ref)('대기중'),R=(0,a.ref)(''),G=(0,a.ref)(''),j=(0,a.ref)({name:'',id:'',className:'',grade:'',job:'',level:1,affinity:0,loveLevel:0}),F=(0,a.computed)(()=>(M.value?.pool??[]).slice(0,30)),H=(0,a.computed)(()=>(M.value?.ownedPartners??[]).slice(0,30));let X=null;async function J(){X&&(M.value=await X.getSnapshot(),T.value=M.value.csvUrl)}function O(e){const t=`소모 ${e.spent} SP`,a=e.refund>0?` / 환급 ${e.refund} SP`:'',l=e.partnerName?` / 대상 ${e.partnerName}`:'';return`${e.message} (${t}${a}${l})`}async function q(e){if(!t.value){t.value=!0;try{await e()}catch(e){const t=e instanceof Error?e.message:String(e);A.value=`오류: ${t}`,toastr.error(A.value)}finally{t.value=!1}}}async function K(){X&&await q(async()=>{await X.setPoolCsvUrl(T.value),await J(),A.value='CSV URL 저장 완료',toastr.success(A.value)})}async function Q(){X&&await q(async()=>{const e=await X.refreshPoolFromCsv();A.value=e.message,e.ok?toastr.success(e.message):toastr.warning(e.message),await J()})}async function W(e){X&&await q(async()=>{const t=await X.drawGacha(e);A.value=O(t),t.ok?toastr.success(A.value):toastr.warning(A.value),await J()})}async function Y(){X&&await q(async()=>{const e=await X.pickupByName(I.value);A.value=O(e),e.ok?toastr.success(A.value):toastr.warning(A.value),await J()})}async function Z(){X&&await q(async()=>{const e={Id:j.value.id.trim()||j.value.name.trim(),Name:j.value.name.trim(),Grade:j.value.grade.trim()||'D',Class:j.value.className.trim()||'support',Job:j.value.job.trim()||'미정',Level:Number(j.value.level),Affinity:Number(j.value.affinity),LoveLevel:Number(j.value.loveLevel)},t=await X.registerCustomPartner(e);A.value=O(t),t.ok?toastr.success(A.value):toastr.warning(A.value),await J()})}async function ee(){X&&await q(async()=>{const e=await X.addPartnerToParty(R.value,G.value||void 0);A.value=e?'파티 편성 완료':'파티 편성 실패',e?toastr.success(A.value):toastr.warning(A.value),await J()})}async function te(){X&&await q(async()=>{const e=R.value.trim()||G.value.trim();if(!e)return void toastr.warning('해제 대상 ID 또는 슬롯을 입력하세요.');const t=await X.removePartnerFromParty(e);A.value=t?'파티 해제 완료':'파티 해제 실패',t?toastr.success(A.value):toastr.warning(A.value),await J()})}return(0,a.onMounted)(async()=>{if(X=await async function(){for(let e=0;e<30;e+=1){const e=window.top.SDH??window.SDH;if(e)return e;await new Promise(e=>setTimeout(e,200))}return null}(),!X)return A.value='SDH 파트너 스크립트를 찾지 못했습니다.',void toastr.error(A.value);await J()}),(e,X)=>((0,a.openBlock)(),(0,a.createElementBlock)('main',l,[X[31]||(X[31]=(0,a.createElementVNode)('div',{class:'starfield'},null,-1)),(0,a.createElementVNode)('section',n,[X[14]||(X[14]=(0,a.createElementVNode)('h1',null,'Stardust Gacha Console',-1)),X[15]||(X[15]=(0,a.createElementVNode)('p',{class:'sub'},'상아색 성운 UI · 황금 장식 · 파트너 소환 및 등록',-1)),(0,a.createElementVNode)('div',o,[(0,a.createElementVNode)('span',null,'SP: '+(0,a.toDisplayString)((0,a.unref)(M)?.sdp??0),1),(0,a.createElementVNode)('span',null,'소지 파트너: '+(0,a.toDisplayString)((0,a.unref)(M)?.ownedCount??0),1),(0,a.createElementVNode)('span',null,'파티: '+(0,a.toDisplayString)((0,a.unref)(M)?.inPartyCount??0)+'/3',1),(0,a.createElementVNode)('span',null,'풀 인원: '+(0,a.toDisplayString)((0,a.unref)(M)?.poolCount??0),1)])]),(0,a.createElementVNode)('section',r,[X[16]||(X[16]=(0,a.createElementVNode)('h2',null,'가챠 풀 CSV',-1)),(0,a.createElementVNode)('div',s,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[0]||(X[0]=e=>(0,a.isRef)(T)?T.value=e:null),class:'input grow',placeholder:'Google Spreadsheet CSV URL'},null,512),[[a.vModelText,(0,a.unref)(T),void 0,{trim:!0}]]),(0,a.createElementVNode)('button',{class:'btn gold',disabled:(0,a.unref)(t),onClick:K},'URL 저장',8,i),(0,a.createElementVNode)('button',{class:'btn',disabled:(0,a.unref)(t),onClick:Q},'풀 새로고침',8,c)]),(0,a.createElementVNode)('p',u,'현재 URL: '+(0,a.toDisplayString)((0,a.unref)(M)?.csvUrl||'(미설정)'),1),(0,a.createElementVNode)('p',d,' 마지막 동기화: '+(0,a.toDisplayString)((0,a.unref)(M)?.lastPoolSyncAt?new Date((0,a.unref)(M).lastPoolSyncAt).toLocaleString():'(없음)'),1)]),(0,a.createElementVNode)('section',m,[(0,a.createElementVNode)('article',v,[X[17]||(X[17]=(0,a.createElementVNode)('h3',null,'일반 가챠',-1)),X[18]||(X[18]=(0,a.createElementVNode)('p',null,'비용: 1,000 SP',-1)),X[19]||(X[19]=(0,a.createElementVNode)('p',{class:'rate'},'EX 0.1 / S 1 / A 5 / B 15 / C 30 / D 48.9 (%)',-1)),(0,a.createElementVNode)('button',{class:'btn wide',disabled:(0,a.unref)(t),onClick:X[1]||(X[1]=e=>W('normal'))},'일반 1회',8,p)]),(0,a.createElementVNode)('article',f,[X[20]||(X[20]=(0,a.createElementVNode)('h3',null,'고급 가챠',-1)),X[21]||(X[21]=(0,a.createElementVNode)('p',null,'비용: 5,000 SP',-1)),X[22]||(X[22]=(0,a.createElementVNode)('p',{class:'rate'},'EX 2 / S 8 / A 20 / B 30 / C 40 / D 0 (%)',-1)),(0,a.createElementVNode)('button',{class:'btn wide',disabled:(0,a.unref)(t),onClick:X[2]||(X[2]=e=>W('advanced'))},'고급 1회',8,V)]),(0,a.createElementVNode)('article',N,[X[23]||(X[23]=(0,a.createElementVNode)('h3',null,'픽업 가챠',-1)),X[24]||(X[24]=(0,a.createElementVNode)('p',null,'비용: 50,000 SP',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[3]||(X[3]=e=>(0,a.isRef)(I)?I.value=e:null),class:'input',placeholder:'풀에 있는 파트너 이름'},null,512),[[a.vModelText,(0,a.unref)(I),void 0,{trim:!0}]]),(0,a.createElementVNode)('button',{class:'btn wide',disabled:(0,a.unref)(t),onClick:Y},'픽업 소환',8,E)])]),(0,a.createElementVNode)('section',w,[X[25]||(X[25]=(0,a.createElementVNode)('h2',null,'커스텀 파트너 등록 (10,000 SP)',-1)),(0,a.createElementVNode)('div',y,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[4]||(X[4]=e=>(0,a.unref)(j).name=e),class:'input',placeholder:'이름'},null,512),[[a.vModelText,(0,a.unref)(j).name,void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[5]||(X[5]=e=>(0,a.unref)(j).id=e),class:'input',placeholder:'ID (비우면 이름 기반 생성)'},null,512),[[a.vModelText,(0,a.unref)(j).id,void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[6]||(X[6]=e=>(0,a.unref)(j).className=e),class:'input',placeholder:'클래스 (자유 입력)'},null,512),[[a.vModelText,(0,a.unref)(j).className,void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[7]||(X[7]=e=>(0,a.unref)(j).grade=e),class:'input',placeholder:'등급 (자유 입력)'},null,512),[[a.vModelText,(0,a.unref)(j).grade,void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[8]||(X[8]=e=>(0,a.unref)(j).job=e),class:'input',placeholder:'직업'},null,512),[[a.vModelText,(0,a.unref)(j).job,void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[9]||(X[9]=e=>(0,a.unref)(j).level=e),class:'input',type:'number',min:'1',placeholder:'레벨'},null,512),[[a.vModelText,(0,a.unref)(j).level,void 0,{number:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[10]||(X[10]=e=>(0,a.unref)(j).affinity=e),class:'input',type:'number',placeholder:'호감도'},null,512),[[a.vModelText,(0,a.unref)(j).affinity,void 0,{number:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[11]||(X[11]=e=>(0,a.unref)(j).loveLevel=e),class:'input',type:'number',placeholder:'러브 레벨'},null,512),[[a.vModelText,(0,a.unref)(j).loveLevel,void 0,{number:!0}]])]),(0,a.createElementVNode)('button',{class:'btn gold wide',disabled:(0,a.unref)(t),onClick:Z},'커스텀 등록',8,S)]),(0,a.createElementVNode)('section',b,[X[27]||(X[27]=(0,a.createElementVNode)('h2',null,'파티 편성',-1)),(0,a.createElementVNode)('div',g,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':X[12]||(X[12]=e=>(0,a.isRef)(R)?R.value=e:null),class:'input',placeholder:'파트너 ID'},null,512),[[a.vModelText,(0,a.unref)(R),void 0,{trim:!0}]]),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':X[13]||(X[13]=e=>(0,a.isRef)(G)?G.value=e:null),class:'input'},[...X[26]||(X[26]=[(0,a.createElementVNode)('option',{value:''},'자동 슬롯',-1),(0,a.createElementVNode)('option',{value:'Slot1'},'Slot1',-1),(0,a.createElementVNode)('option',{value:'Slot2'},'Slot2',-1),(0,a.createElementVNode)('option',{value:'Slot3'},'Slot3',-1)])],512),[[a.vModelSelect,(0,a.unref)(G)]]),(0,a.createElementVNode)('button',{class:'btn',disabled:(0,a.unref)(t),onClick:ee},'편성',8,h),(0,a.createElementVNode)('button',{class:'btn',disabled:(0,a.unref)(t),onClick:te},'해제',8,D)]),(0,a.createElementVNode)('p',k,' 현재 슬롯: Slot1='+(0,a.toDisplayString)((0,a.unref)(M)?.partySlots.Slot1||'-')+', Slot2='+(0,a.toDisplayString)((0,a.unref)(M)?.partySlots.Slot2||'-')+', Slot3='+(0,a.toDisplayString)((0,a.unref)(M)?.partySlots.Slot3||'-'),1)]),(0,a.createElementVNode)('section',C,[X[28]||(X[28]=(0,a.createElementVNode)('h2',null,'최근 결과',-1)),(0,a.createElementVNode)('p',P,(0,a.toDisplayString)((0,a.unref)(A)),1),(0,a.createElementVNode)('button',{class:'btn',disabled:(0,a.unref)(t),onClick:J},'새로고침',8,U)]),(0,a.createElementVNode)('section',x,[(0,a.createElementVNode)('div',null,[X[29]||(X[29]=(0,a.createElementVNode)('h3',null,'가챠 풀 (상위 30)',-1)),(0,a.createElementVNode)('ul',L,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(F),e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.Id},(0,a.toDisplayString)(e.Name)+' · '+(0,a.toDisplayString)(e.Grade)+' · '+(0,a.toDisplayString)(e.Class)+' · '+(0,a.toDisplayString)(e.Id),1))),128))])]),(0,a.createElementVNode)('div',null,[X[30]||(X[30]=(0,a.createElementVNode)('h3',null,'소지 파트너 (상위 30)',-1)),(0,a.createElementVNode)('ul',B,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(H),e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.Id},(0,a.toDisplayString)(e.Name)+' · Lv'+(0,a.toDisplayString)(e.Level)+' · '+(0,a.toDisplayString)(e.Grade)+' · '+(0,a.toDisplayString)(e.InParty?'Party':'Standby'),1))),128))])])])]))}});var T=function a(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={exports:{}};return e[l](o,o.exports,a),o.exports}(667);const I=(0,T.A)(M,[['__scopeId','data-v-48740436']]);$(()=>{(0,a.createApp)(I).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>[data-v-48740436]:root{--ivory-0:#fffdf5;--ivory-1:#f5efdf;--gold-0:#9f6b00;--gold-1:#d9b24a;--gold-2:#f5d98c;--ink-0:#1f1d18}.page[data-v-48740436]{min-height:100vh;padding:20px;color:var(--ink-0);background:radial-gradient(1200px 900px at 85% -10%,#2f2a4d 0%,rgba(47,42,77,0) 70%),radial-gradient(900px 700px at -10% 110%,#223047 0%,rgba(34,48,71,0) 65%),linear-gradient(180deg,var(--ivory-0),var(--ivory-1))}.starfield[data-v-48740436]{position:fixed;inset:0;pointer-events:none;opacity:0.22;background-image:radial-gradient(circle at 8% 15%,#ffffff 0 1px,transparent 2px),radial-gradient(circle at 28% 42%,#fff7c2 0 1px,transparent 2px),radial-gradient(circle at 70% 30%,#ffffff 0 1px,transparent 2px),radial-gradient(circle at 90% 65%,#fff0a8 0 1px,transparent 2px),radial-gradient(circle at 44% 80%,#ffffff 0 1px,transparent 2px)}.card[data-v-48740436]{position:relative;margin:0 auto 14px auto;max-width:1100px;border-radius:16px;border:1px solid rgba(159,107,0,0.25);background:rgba(255,252,242,0.9);box-shadow:inset 0 0 0 1px rgba(245,217,140,0.25),0 10px 30px rgba(37,28,9,0.12);padding:16px}.card[data-v-48740436]::before{content:'';position:absolute;inset:8px;border-radius:10px;border:1px solid rgba(217,178,74,0.26);pointer-events:none}.header h1[data-v-48740436]{margin:2px 0 6px 0;font-size:28px;letter-spacing:0.04em;color:#5d4100}.sub[data-v-48740436]{margin:0;color:#685633}.stats[data-v-48740436]{margin-top:10px;display:flex;gap:12px;flex-wrap:wrap}.stats span[data-v-48740436]{background:rgba(245,217,140,0.35);color:#47360e;border:1px solid rgba(159,107,0,0.25);padding:4px 10px;border-radius:999px}.row[data-v-48740436]{display:flex;gap:10px;flex-wrap:wrap}.grid3[data-v-48740436]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}.grid2[data-v-48740436]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}.tables[data-v-48740436]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}.input[data-v-48740436]{background:rgba(255,250,235,0.96);border:1px solid rgba(159,107,0,0.35);color:#2f2715;border-radius:10px;padding:8px 10px;min-height:36px}.input.grow[data-v-48740436]{flex:1;min-width:260px}.btn[data-v-48740436]{border:1px solid rgba(159,107,0,0.5);background:linear-gradient(180deg,#fff8e2,#f8e5b1);color:#3d2c08;border-radius:10px;padding:8px 12px;cursor:pointer}.btn.gold[data-v-48740436]{background:linear-gradient(180deg,#f7dc9b,#d7ab3f)}.btn.wide[data-v-48740436]{width:100%}.btn[data-v-48740436]:disabled{opacity:0.55;cursor:not-allowed}.gacha-box[data-v-48740436]{border-radius:12px;border:1px solid rgba(159,107,0,0.28);padding:12px;background:linear-gradient(165deg,rgba(255,248,224,0.95),rgba(248,235,187,0.6))}.gacha-box h3[data-v-48740436]{margin:0 0 4px 0}.rate[data-v-48740436]{color:#5f4f2c;font-size:13px}.hint[data-v-48740436]{color:#6f5f3d;margin:6px 0 0 0}.result[data-v-48740436]{margin:0 0 10px 0;color:#4a3912;font-weight:600}.list[data-v-48740436]{margin:0;padding:0;list-style:none;max-height:280px;overflow:auto;border:1px solid rgba(159,107,0,0.22);border-radius:10px;background:rgba(255,248,229,0.72)}.list li[data-v-48740436]{padding:7px 10px;border-bottom:1px solid rgba(159,107,0,0.12);font-size:13px}.list li[data-v-48740436]:last-child{border-bottom:none}@media (max-width:980px){.grid3[data-v-48740436]{grid-template-columns:1fr}.tables[data-v-48740436]{grid-template-columns:1fr}.grid2[data-v-48740436]{grid-template-columns:1fr}}


/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>